{
  "version": 3,
  "sources": ["../../is-absolute-url/index.js", "../../rehype-external-links/index.js"],
  "sourcesContent": ["// Scheme: https://tools.ietf.org/html/rfc3986#section-3.1\n// Absolute URL: https://tools.ietf.org/html/rfc3986#section-4.3\nconst ABSOLUTE_URL_REGEX = /^[a-zA-Z][a-zA-Z\\d+\\-.]*?:/;\n\n// Windows paths like `c:\\`\nconst WINDOWS_PATH_REGEX = /^[a-zA-Z]:\\\\/;\n\nexport default function isAbsoluteUrl(url) {\n\tif (typeof url !== 'string') {\n\t\tthrow new TypeError(`Expected a \\`string\\`, got \\`${typeof url}\\``);\n\t}\n\n\tif (WINDOWS_PATH_REGEX.test(url)) {\n\t\treturn false;\n\t}\n\n\treturn ABSOLUTE_URL_REGEX.test(url);\n}\n", "/**\n * @typedef {import('hast').Root} Root\n * @typedef {import('hast').Properties} Properties\n * @typedef {import('hast').Element} Element\n * @typedef {import('hast-util-is-element').Test} Test\n *\n * @typedef {Element['children'][number]} ElementChild\n *\n * @typedef {'_self'|'_blank'|'_parent'|'_top'} Target\n * @typedef {Array<string>|string} Rel\n * @typedef {Array<string>} Protocols\n * @typedef {ElementChild|Array<ElementChild>} Content\n * @typedef {Properties} ContentProperties\n *\n * @callback TargetCallback\n * @param {Element} node\n * @returns {Target|null|undefined}\n *\n * @callback RelCallback\n * @param {Element} node\n * @returns {Rel|null|undefined}\n *\n * @callback ProtocolsCallback\n * @param {Element} node\n * @returns {Protocols|null|undefined}\n *\n * @callback ContentCallback\n * @param {Element} node\n * @returns {Content|null|undefined}\n *\n * @callback ContentPropertiesCallback\n * @param {Element} node\n * @returns {Properties|null|undefined}\n *\n * @typedef Options\n *   Configuration.\n * @property {Target|TargetCallback} [target]\n *   How to display referenced documents (`string?`: `_self`, `_blank`,\n *   `_parent`, or `_top`, default: `_blank`).\n *   The default (nothing) is to not set `target`s on links.\n * @property {Rel|RelCallback} [rel=['nofollow', 'noopener', 'noreferrer']]\n *   Link types to hint about the referenced documents.\n *   Pass an empty array (`[]`) to not set `rel`s on links.\n *\n *   **Note**: when using a `target`, add `noopener` and `noreferrer` to avoid\n *   exploitation of the `window.opener` API.\n * @property {Protocols|ProtocolsCallback} [protocols=['http', 'https']]\n *   Protocols to check, such as `mailto` or `tel`.\n * @property {Content|ContentCallback} [content]\n *   hast content to insert at the end of external links.\n *   Will be inserted in a `<span>` element.\n *\n *   Useful for improving accessibility by giving users advanced warning when\n *   opening a new window.\n * @property {ContentProperties|ContentPropertiesCallback} [contentProperties]\n *   hast properties to add to the `span` wrapping `content`, when given.\n * @property {Test} [test]\n *   Additional test to define which external link elements are modified.\n *   Any test that can be given to `hast-util-is-element` is supported.\n *   The default (no test) is to modify all external links.\n */\n\nimport {visit} from 'unist-util-visit'\nimport {parse} from 'space-separated-tokens'\nimport {convertElement} from 'hast-util-is-element'\nimport isAbsoluteUrl from 'is-absolute-url'\nimport extend from 'extend'\n\nconst defaultRel = ['nofollow']\nconst defaultProtocols = ['http', 'https']\n\n/**\n * If this is a value, return that.\n * If this is a function instead, call it to get the result.\n *\n * @template T\n * @param {T} value\n * @param {Element} node\n * @returns {T extends Function ? ReturnType<T> : T}\n */\nfunction callIfNeeded(value, node) {\n  return typeof value === 'function' ? value(node) : value\n}\n\n/**\n * Plugin to automatically add `target` and `rel` attributes to external links.\n *\n * @type {import('unified').Plugin<[Options?] | Array<void>, Root>}\n */\nexport default function rehypeExternalLinks(options = {}) {\n  const is = convertElement(options.test)\n\n  return (tree) => {\n    visit(tree, 'element', (node, index, parent) => {\n      if (\n        node.tagName === 'a' &&\n        node.properties &&\n        typeof node.properties.href === 'string' &&\n        is(node, index, parent)\n      ) {\n        const url = node.properties.href\n        const protocol = url.slice(0, url.indexOf(':'))\n\n        const target = callIfNeeded(options.target, node)\n\n        const relRaw = callIfNeeded(options.rel, node) || defaultRel\n        const rel = typeof relRaw === 'string' ? parse(relRaw) : relRaw\n\n        const protocols =\n          callIfNeeded(options.protocols, node) || defaultProtocols\n\n        const contentRaw = callIfNeeded(options.content, node)\n        const content =\n          contentRaw && !Array.isArray(contentRaw) ? [contentRaw] : contentRaw\n\n        const contentProperties =\n          callIfNeeded(options.contentProperties, node) || {}\n\n        if (\n          isAbsoluteUrl(url)\n            ? protocols.includes(protocol)\n            : url.startsWith('//')\n        ) {\n          if (target) {\n            node.properties.target = target\n          }\n\n          if (rel.length > 0) {\n            node.properties.rel = rel.concat()\n          }\n\n          if (content) {\n            node.children.push({\n              type: 'element',\n              tagName: 'span',\n              properties: extend(true, contentProperties),\n              children: extend(true, content)\n            })\n          }\n        }\n      }\n    })\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;AAEA,IAAM,qBAAqB;AAG3B,IAAM,qBAAqB;AAEZ,SAAR,cAA+B,KAAK;AAC1C,MAAI,OAAO,QAAQ,UAAU;AAC5B,UAAM,IAAI,UAAU,gCAAgC,OAAO,GAAG,IAAI;AAAA,EACnE;AAEA,MAAI,mBAAmB,KAAK,GAAG,GAAG;AACjC,WAAO;AAAA,EACR;AAEA,SAAO,mBAAmB,KAAK,GAAG;AACnC;;;ACiDA,oBAAmB;AAEnB,IAAM,aAAa,CAAC,UAAU;AAC9B,IAAM,mBAAmB,CAAC,QAAQ,OAAO;AAWzC,SAAS,aAAa,OAAO,MAAM;AACjC,SAAO,OAAO,UAAU,aAAa,MAAM,IAAI,IAAI;AACrD;AAOe,SAAR,oBAAqC,UAAU,CAAC,GAAG;AACxD,QAAM,KAAK,eAAe,QAAQ,IAAI;AAEtC,SAAO,CAAC,SAAS;AACf,UAAM,MAAM,WAAW,CAAC,MAAM,OAAO,WAAW;AAC9C,UACE,KAAK,YAAY,OACjB,KAAK,cACL,OAAO,KAAK,WAAW,SAAS,YAChC,GAAG,MAAM,OAAO,MAAM,GACtB;AACA,cAAM,MAAM,KAAK,WAAW;AAC5B,cAAM,WAAW,IAAI,MAAM,GAAG,IAAI,QAAQ,GAAG,CAAC;AAE9C,cAAM,SAAS,aAAa,QAAQ,QAAQ,IAAI;AAEhD,cAAM,SAAS,aAAa,QAAQ,KAAK,IAAI,KAAK;AAClD,cAAM,MAAM,OAAO,WAAW,WAAW,MAAM,MAAM,IAAI;AAEzD,cAAM,YACJ,aAAa,QAAQ,WAAW,IAAI,KAAK;AAE3C,cAAM,aAAa,aAAa,QAAQ,SAAS,IAAI;AACrD,cAAM,UACJ,cAAc,CAAC,MAAM,QAAQ,UAAU,IAAI,CAAC,UAAU,IAAI;AAE5D,cAAM,oBACJ,aAAa,QAAQ,mBAAmB,IAAI,KAAK,CAAC;AAEpD,YACE,cAAc,GAAG,IACb,UAAU,SAAS,QAAQ,IAC3B,IAAI,WAAW,IAAI,GACvB;AACA,cAAI,QAAQ;AACV,iBAAK,WAAW,SAAS;AAAA,UAC3B;AAEA,cAAI,IAAI,SAAS,GAAG;AAClB,iBAAK,WAAW,MAAM,IAAI,OAAO;AAAA,UACnC;AAEA,cAAI,SAAS;AACX,iBAAK,SAAS,KAAK;AAAA,cACjB,MAAM;AAAA,cACN,SAAS;AAAA,cACT,gBAAY,cAAAA,SAAO,MAAM,iBAAiB;AAAA,cAC1C,cAAU,cAAAA,SAAO,MAAM,OAAO;AAAA,YAChC,CAAC;AAAA,UACH;AAAA,QACF;AAAA,MACF;AAAA,IACF,CAAC;AAAA,EACH;AACF;",
  "names": ["extend"]
}
