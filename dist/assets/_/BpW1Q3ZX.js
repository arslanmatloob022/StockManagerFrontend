import{s as e}from"./Dvmd-DKe.js";import{b as t}from"./DsK3fUzE.js";import{p as n,a as r,b as a}from"./CVUg9P9R.js";import{v as o}from"./DuWygBDP.js";function l(e){const n=[];let r=-1,a=0,o=0;for(;++r<e.length;){const l=e.charCodeAt(r);let i="";if(37===l&&t(e.charCodeAt(r+1))&&t(e.charCodeAt(r+2)))o=2;else if(l<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(l))||(i=String.fromCharCode(l));else if(l>55295&&l<57344){const t=e.charCodeAt(r+1);l<56320&&t>56319&&t<57344?(i=String.fromCharCode(l,t),o=1):i="�"}else i=String.fromCharCode(l);i&&(n.push(e.slice(a,r),encodeURIComponent(i)),a=r+o+1,i=""),o&&(r+=o,o=0)}return n.join("")+e.slice(a)}function i(e,t){const n=t.referenceType;let r="]";if("collapsed"===n?r+="[]":"full"===n&&(r+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return[{type:"text",value:"!["+t.alt+r}];const a=e.all(t),o=a[0];o&&"text"===o.type?o.value="["+o.value:a.unshift({type:"text",value:"["});const l=a[a.length-1];return l&&"text"===l.type?l.value+=r:a.push({type:"text",value:r}),a}function p(e){const t=e.spread;return null==t?e.children.length>1:t}const c=9,s=32;function u(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),a=0;const o=[];for(;r;)o.push(h(t.slice(a,r.index),a>0,!0),r[0]),a=r.index+r[0].length,r=n.exec(t);return o.push(h(t.slice(a),a>0,!1)),o.join("")}function h(e,t,n){let r=0,a=e.length;if(t){let t=e.codePointAt(r);for(;t===c||t===s;)r++,t=e.codePointAt(r)}if(n){let t=e.codePointAt(a-1);for(;t===c||t===s;)a--,t=e.codePointAt(a-1)}return a>r?e.slice(r,a):""}const f={blockquote:function(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)},break:function(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:"\n"}]},code:function(e,t){const n=t.value?t.value+"\n":"",r={};t.lang&&(r.className=["language-"+t.lang]);let a={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(a.data={meta:t.meta}),e.patch(t,a),a=e.applyData(t,a),a={type:"element",tagName:"pre",properties:{},children:[a]},e.patch(t,a),a},delete:function(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},emphasis:function(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},footnoteReference:function(e,t){const n="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),a=l(r.toLowerCase()),o=e.footnoteOrder.indexOf(r);let i,p=e.footnoteCounts.get(r);void 0===p?(p=0,e.footnoteOrder.push(r),i=e.footnoteOrder.length):i=o+1,p+=1,e.footnoteCounts.set(r,p);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+a,id:n+"fnref-"+a+(p>1?"-"+p:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(i)}]};e.patch(t,c);const s={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,s),e.applyData(t,s)},heading:function(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},html:function(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}},imageReference:function(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return i(e,t);const a={src:l(r.url||""),alt:t.alt};null!==r.title&&void 0!==r.title&&(a.title=r.title);const o={type:"element",tagName:"img",properties:a,children:[]};return e.patch(t,o),e.applyData(t,o)},image:function(e,t){const n={src:l(t.url)};null!==t.alt&&void 0!==t.alt&&(n.alt=t.alt),null!==t.title&&void 0!==t.title&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)},inlineCode:function(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)},linkReference:function(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return i(e,t);const a={href:l(r.url||"")};null!==r.title&&void 0!==r.title&&(a.title=r.title);const o={type:"element",tagName:"a",properties:a,children:e.all(t)};return e.patch(t,o),e.applyData(t,o)},link:function(e,t){const n={href:l(t.url)};null!==t.title&&void 0!==t.title&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)},listItem:function(e,t,n){const r=e.all(t),a=n?function(e){let t=!1;if("list"===e.type){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=p(n[r])}return t}(n):p(t),o={},l=[];if("boolean"==typeof t.checked){const e=r[0];let n;e&&"element"===e.type&&"p"===e.tagName?n=e:(n={type:"element",tagName:"p",properties:{},children:[]},r.unshift(n)),n.children.length>0&&n.children.unshift({type:"text",value:" "}),n.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let i=-1;for(;++i<r.length;){const e=r[i];(a||0!==i||"element"!==e.type||"p"!==e.tagName)&&l.push({type:"text",value:"\n"}),"element"!==e.type||"p"!==e.tagName||a?l.push(e):l.push(...e.children)}const c=r[r.length-1];c&&(a||"element"!==c.type||"p"!==c.tagName)&&l.push({type:"text",value:"\n"});const s={type:"element",tagName:"li",properties:o,children:l};return e.patch(t,s),e.applyData(t,s)},list:function(e,t){const n={},r=e.all(t);let a=-1;for("number"==typeof t.start&&1!==t.start&&(n.start=t.start);++a<r.length;){const e=r[a];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,o),e.applyData(t,o)},paragraph:function(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},root:function(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)},strong:function(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},table:function(e,t){const a=e.all(t),o=a.shift(),l=[];if(o){const n={type:"element",tagName:"thead",properties:{},children:e.wrap([o],!0)};e.patch(t.children[0],n),l.push(n)}if(a.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(a,!0)},i=n(t.children[1]),p=r(t.children[t.children.length-1]);i&&p&&(o.position={start:i,end:p}),l.push(o)}const i={type:"element",tagName:"table",properties:{},children:e.wrap(l,!0)};return e.patch(t,i),e.applyData(t,i)},tableCell:function(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},tableRow:function(e,t,n){const r=n?n.children:void 0,a=0===(r?r.indexOf(t):1)?"th":"td",o=n&&"table"===n.type?n.align:void 0,l=o?o.length:t.children.length;let i=-1;const p=[];for(;++i<l;){const n=t.children[i],r={},l=o?o[i]:void 0;l&&(r.align=l);let c={type:"element",tagName:a,properties:r,children:[]};n&&(c.children=e.all(n),e.patch(n,c),c=e.applyData(n,c)),p.push(c)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(p,!0)};return e.patch(t,c),e.applyData(t,c)},text:function(e,t){const n={type:"text",value:u(String(t.value))};return e.patch(t,n),e.applyData(t,n)},thematicBreak:function(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)},toml:d,yaml:d,definition:d,footnoteDefinition:d};function d(){}function y(e,t){const n=[{type:"text",value:"↩"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function m(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}const g={}.hasOwnProperty,v={};function N(e,t){e.position&&(t.position=a(e))}function x(t,n){let r=n;if(t&&t.data){const n=t.data.hName,a=t.data.hChildren,o=t.data.hProperties;if("string"==typeof n)if("element"===r.type)r.tagName=n;else{r={type:"element",tagName:n,properties:{},children:"children"in r?r.children:[r]}}"element"===r.type&&o&&Object.assign(r.properties,e(o)),"children"in r&&r.children&&null!=a&&(r.children=a)}return r}function b(e,t){const n=t.data||{},r=!("value"in t)||g.call(n,"hProperties")||g.call(n,"hChildren")?{type:"element",tagName:"div",properties:{},children:e.all(t)}:{type:"text",value:t.value};return e.patch(t,r),e.applyData(t,r)}function C(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:"\n"});++r<e.length;)r&&n.push({type:"text",value:"\n"}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:"\n"}),n}function D(e){let t=0,n=e.charCodeAt(t);for(;9===n||32===n;)t++,n=e.charCodeAt(t);return e.slice(t)}function A(t,n){const r=function(t,n){const r=n||v,a=new Map,l=new Map,i=new Map,p={...f,...r.handlers},c={all:function(e){const t=[];if("children"in e){const n=e.children;let r=-1;for(;++r<n.length;){const a=c.one(n[r],e);if(a){if(r&&"break"===n[r-1].type&&(Array.isArray(a)||"text"!==a.type||(a.value=D(a.value)),!Array.isArray(a)&&"element"===a.type)){const e=a.children[0];e&&"text"===e.type&&(e.value=D(e.value))}Array.isArray(a)?t.push(...a):t.push(a)}}}return t},applyData:x,definitionById:a,footnoteById:l,footnoteCounts:i,footnoteOrder:[],handlers:p,one:function(t,n){const r=t.type,a=c.handlers[r];if(g.call(c.handlers,r)&&a)return a(c,t,n);if(c.options.passThrough&&c.options.passThrough.includes(r)){if("children"in t){const{children:n,...r}=t,a=e(r);return a.children=c.all(t),a}return e(t)}return(c.options.unknownHandler||b)(c,t,n)},options:r,patch:N,wrap:C};return o(t,(function(e){if("definition"===e.type||"footnoteDefinition"===e.type){const t="definition"===e.type?a:l,n=String(e.identifier).toUpperCase();t.has(n)||t.set(n,e)}})),c}(t,n),a=r.one(t,void 0),i=function(t){const n="string"==typeof t.options.clobberPrefix?t.options.clobberPrefix:"user-content-",r=t.options.footnoteBackContent||y,a=t.options.footnoteBackLabel||m,o=t.options.footnoteLabel||"Footnotes",i=t.options.footnoteLabelTagName||"h2",p=t.options.footnoteLabelProperties||{className:["sr-only"]},c=[];let s=-1;for(;++s<t.footnoteOrder.length;){const e=t.footnoteById.get(t.footnoteOrder[s]);if(!e)continue;const o=t.all(e),i=String(e.identifier).toUpperCase(),p=l(i.toLowerCase());let u=0;const h=[],f=t.footnoteCounts.get(i);for(;void 0!==f&&++u<=f;){h.length>0&&h.push({type:"text",value:" "});let e="string"==typeof r?r:r(s,u);"string"==typeof e&&(e={type:"text",value:e}),h.push({type:"element",tagName:"a",properties:{href:"#"+n+"fnref-"+p+(u>1?"-"+u:""),dataFootnoteBackref:"",ariaLabel:"string"==typeof a?a:a(s,u),className:["data-footnote-backref"]},children:Array.isArray(e)?e:[e]})}const d=o[o.length-1];if(d&&"element"===d.type&&"p"===d.tagName){const e=d.children[d.children.length-1];e&&"text"===e.type?e.value+=" ":d.children.push({type:"text",value:" "}),d.children.push(...h)}else o.push(...h);const y={type:"element",tagName:"li",properties:{id:n+"fn-"+p},children:t.wrap(o,!0)};t.patch(e,y),c.push(y)}if(0!==c.length)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...e(p),id:"footnote-label"},children:[{type:"text",value:o}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:t.wrap(c,!0)},{type:"text",value:"\n"}]}}(r),p=Array.isArray(a)?{type:"root",children:a}:a||{type:"root",children:[]};return i&&p.children.push({type:"text",value:"\n"},i),p}function k(e,t){return e&&"run"in e?async function(n,r){const a=A(n,{file:r,...t});await e.run(a,r)}:function(n,r){return A(n,{file:r,...t||e})}}export{k as default,y as defaultFootnoteBackContent,m as defaultFootnoteBackLabel,f as defaultHandlers};
