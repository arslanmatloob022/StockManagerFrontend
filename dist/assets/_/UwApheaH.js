import{a as e,r as t,c as n,H as r,n as i,o as l,K as a,w as u,p as o,ai as s,aj as c,d,Q as v,a9 as f,i as p,P as h}from"../../index-BBZ1hd8o.js";import{d as y}from"./iUM7Auia.js";
/**
  * vee-validate v4.12.6
  * (c) 2024 Abdelrahman Awad
  * @license MIT
  */function g(e){return"function"==typeof e}function m(e){return null==e}const b=e=>null!==e&&!!e&&"object"==typeof e&&!Array.isArray(e);function O(e){return Number(e)>=0}function A(e){if(!function(e){return"object"==typeof e&&null!==e}(e)||"[object Object]"!==function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}(e))return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function V(e,t){return Object.keys(t).forEach((n=>{if(A(t[n])&&A(e[n]))return e[n]||(e[n]={}),void V(e[n],t[n]);e[n]=t[n]})),e}function j(e){const t=e.split(".");if(!t.length)return"";let n=String(t[0]);for(let r=1;r<t.length;r++)O(t[r])?n+=`[${t[r]}]`:n+=`.${t[r]}`;return n}const w={};function S(e,t,n){"object"==typeof n.value&&(n.value=E(n.value)),n.enumerable&&!n.get&&!n.set&&n.configurable&&n.writable&&"__proto__"!==t?e[t]=n.value:Object.defineProperty(e,t,n)}function E(e){if("object"!=typeof e)return e;var t,n,r,i=0,l=Object.prototype.toString.call(e);if("[object Object]"===l?r=Object.create(e.__proto__||null):"[object Array]"===l?r=Array(e.length):"[object Set]"===l?(r=new Set,e.forEach((function(e){r.add(E(e))}))):"[object Map]"===l?(r=new Map,e.forEach((function(e,t){r.set(E(t),E(e))}))):"[object Date]"===l?r=new Date(+e):"[object RegExp]"===l?r=new RegExp(e.source,e.flags):"[object DataView]"===l?r=new e.constructor(E(e.buffer)):"[object ArrayBuffer]"===l?r=e.slice(0):"Array]"===l.slice(-6)&&(r=new e.constructor(e)),r){for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)S(r,n[i],Object.getOwnPropertyDescriptor(e,n[i]));for(i=0,n=Object.getOwnPropertyNames(e);i<n.length;i++)Object.hasOwnProperty.call(r,t=n[i])&&r[t]===e[t]||S(r,t,Object.getOwnPropertyDescriptor(e,t))}return r||e}const _=Symbol("vee-validate-form"),k=Symbol("vee-validate-field-instance"),I=Symbol("Default empty value"),F="undefined"!=typeof window;function P(e){return g(e)&&!!e.__locatorRef}function C(e){return!!e&&g(e.parse)&&"VVTypedSchema"===e.__type}function U(e){return!!e&&g(e.validate)}function M(e){return"checkbox"===e||"radio"===e}function x(e){return/^\[.+\]$/i.test(e)}function $(e){return"SELECT"===e.tagName}function B(e){return!!e&&(!!("undefined"!=typeof Event&&g(Event)&&e instanceof Event)||!(!e||!e.srcElement))}function N(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;var n,r,i;if(Array.isArray(e)){if((n=e.length)!=t.length)return!1;for(r=n;0!=r--;)if(!N(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!N(r[1],t.get(r[0])))return!1;return!0}if(R(e)&&R(t))return e.size===t.size&&(e.name===t.name&&(e.lastModified===t.lastModified&&e.type===t.type));if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if((n=e.length)!=t.length)return!1;for(r=n;0!=r--;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();for(r=n=(i=Object.keys(e)).length;0!=r--;){var l=i[r];if(!N(e[l],t[l]))return!1}return!0}return e!=e&&t!=t}function R(e){return!!F&&e instanceof File}function T(e){return x(e)?e.replace(/\[|\]/gi,""):e}function D(e,t,n){if(!e)return n;if(x(t))return e[T(t)];return(t||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce(((e,t)=>{return(b(r=e)||Array.isArray(r))&&t in e?e[t]:n;var r}),e)}function z(e,t,n){if(x(t))return void(e[T(t)]=n);const r=t.split(/\.|\[(\d+)\]/).filter(Boolean);let i=e;for(let l=0;l<r.length;l++){if(l===r.length-1)return void(i[r[l]]=n);r[l]in i&&!m(i[r[l]])||(i[r[l]]=O(r[l+1])?[]:{}),i=i[r[l]]}}function W(e,t){Array.isArray(e)&&O(t)?e.splice(Number(t),1):b(e)&&delete e[t]}function q(e,t){if(x(t))return void delete e[T(t)];const n=t.split(/\.|\[(\d+)\]/).filter(Boolean);let r=e;for(let a=0;a<n.length;a++){if(a===n.length-1){W(r,n[a]);break}if(!(n[a]in r)||m(r[n[a]]))break;r=r[n[a]]}const i=n.map(((t,r)=>D(e,n.slice(0,r).join("."))));for(let a=i.length-1;a>=0;a--)l=i[a],(Array.isArray(l)?0===l.length:b(l)&&0===Object.keys(l).length)&&(0!==a?W(i[a-1],n[a-1]):W(e,n[0]));var l}function L(e){return Object.keys(e)}function G(e,t=void 0){const n=h();return(null==n?void 0:n.provides[e])||p(e,t)}function H(e,t=0){let n=null,r=[];return function(...i){return n&&clearTimeout(n),n=setTimeout((()=>{const t=e(...i);r.forEach((e=>e(t))),r=[]}),t),new Promise((e=>r.push(e)))}}function K(e,t){return b(t)&&t.number?function(e){const t=parseFloat(e);return isNaN(t)?e:t}(e):e}function Q(e,t){let n;return async function(...r){const i=e(...r);n=i;const l=await i;return i!==n?l:(n=void 0,t(l,r))}}function X({get:t,set:n}){const r=e(E(t()));return u(t,(e=>{N(e,r.value)||(r.value=E(e))}),{deep:!0}),u(r,(e=>{N(e,t())||n(E(e))}),{deep:!0}),r}function J(e){return Array.isArray(e)?e:e?[e]:[]}function Y(e,t){const n={};for(const r in e)t.includes(r)||(n[r]=e[r]);return n}function Z(e){if(ee(e))return e._value}function ee(e){return"_value"in e}function te(e){if(!B(e))return e;const t=e.target;if(M(t.type)&&ee(t))return Z(t);if("file"===t.type&&t.files){const e=Array.from(t.files);return t.multiple?e:e[0]}if($(n=t)&&n.multiple)return Array.from(t.options).filter((e=>e.selected&&!e.disabled)).map(Z);var n;if($(t)){const e=Array.from(t.options).find((e=>e.selected));return e?Z(e):t.value}return function(e){return"number"===e.type||"range"===e.type?Number.isNaN(e.valueAsNumber)?e.value:e.valueAsNumber:e.value}(t)}function ne(e){const t={};return Object.defineProperty(t,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),e?b(e)&&e._$$isNormalized?e:b(e)?Object.keys(e).reduce(((t,n)=>{const r=function(e){if(!0===e)return[];if(Array.isArray(e))return e;if(b(e))return e;return[e]}(e[n]);return!1!==e[n]&&(t[n]=re(r)),t}),t):"string"!=typeof e?t:e.split("|").reduce(((e,t)=>{const n=ie(t);return n.name?(e[n.name]=re(n.params),e):e}),t):t}function re(e){const t=e=>"string"==typeof e&&"@"===e[0]?function(e){const t=t=>D(t,e)||t[e];return t.__locatorRef=e,t}(e.slice(1)):e;return Array.isArray(e)?e.map(t):e instanceof RegExp?[e]:Object.keys(e).reduce(((n,r)=>(n[r]=t(e[r]),n)),{})}const ie=e=>{let t=[];const n=e.split(":")[0];return e.includes(":")&&(t=e.split(":").slice(1).join(":").split(",")),{name:n,params:t}};let le=Object.assign({},{generateMessage:({field:e})=>`${e} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0});const ae=()=>le;async function ue(e,t,n={}){const r=null==n?void 0:n.bails,i={name:(null==n?void 0:n.name)||"{field}",rules:t,label:null==n?void 0:n.label,bails:null==r||r,formData:(null==n?void 0:n.values)||{}},l=await async function(e,t){if(C(e.rules)||U(e.rules))return async function(e,t){const n=C(t)?t:oe(t),r=await n.parse(e),i=[];for(const l of r.errors)l.errors.length&&i.push(...l.errors);return{errors:i}}(t,e.rules);if(g(e.rules)||Array.isArray(e.rules)){const n={field:e.label||e.name,name:e.name,label:e.label,form:e.formData,value:t},r=Array.isArray(e.rules)?e.rules:[e.rules],i=r.length,l=[];for(let a=0;a<i;a++){const i=r[a],u=await i(t,n);if(!("string"!=typeof u&&!Array.isArray(u)&&u)){if(Array.isArray(u))l.push(...u);else{const e="string"==typeof u?u:ce(n);l.push(e)}if(e.bails)return{errors:l}}}return{errors:l}}const n=Object.assign(Object.assign({},e),{rules:ne(e.rules)}),r=[],i=Object.keys(n.rules),l=i.length;for(let a=0;a<l;a++){const l=i[a],u=await se(n,t,{name:l,params:n.rules[l]});if(u.error&&(r.push(u.error),e.bails))return{errors:r}}return{errors:r}}(i,e),a=l.errors;return{errors:a,valid:!a.length}}function oe(e){return{__type:"VVTypedSchema",async parse(t){var n;try{return{output:await e.validate(t,{abortEarly:!1}),errors:[]}}catch(r){if(!function(e){return!!e&&"ValidationError"===e.name}(r))throw r;if(!(null===(n=r.inner)||void 0===n?void 0:n.length)&&r.errors.length)return{errors:[{path:r.path,errors:r.errors}]};const e=r.inner.reduce(((e,t)=>{const n=t.path||"";return e[n]||(e[n]={errors:[],path:n}),e[n].errors.push(...t.errors),e}),{});return{errors:Object.values(e)}}}}}async function se(e,t,n){const r=(i=n.name,w[i]);var i;if(!r)throw new Error(`No such validator '${n.name}' exists.`);const l=function(e,t){const n=e=>P(e)?e(t):e;if(Array.isArray(e))return e.map(n);return Object.keys(e).reduce(((t,r)=>(t[r]=n(e[r]),t)),{})}(n.params,e.formData),a={field:e.label||e.name,name:e.name,label:e.label,value:t,form:e.formData,rule:Object.assign(Object.assign({},n),{params:l})},u=await r(t,l,a);return"string"==typeof u?{error:u}:{error:u?void 0:ce(a)}}function ce(e){const t=ae().generateMessage;return t?t(e):"Field is invalid"}let de=0;function ve(i,l){const{value:o,initialValue:s,setInitialValue:c}=function(t,i,l){const u=e(r(i));function o(){return l?D(l.initialValues.value,r(t),r(u)):r(u)}function s(e){l?l.setFieldInitialValue(r(t),e,!0):u.value=e}const c=n(o);if(!l){return{value:e(o()),initialValue:c,setInitialValue:s}}const d=function(e,t,n,i){if(a(e))return r(e);if(void 0!==e)return e;return D(t.values,r(i),r(n))}(i,l,c,t);l.stageInitialValue(r(t),d,!0);const v=n({get:()=>D(l.values,r(t)),set(e){l.setFieldValue(r(t),e,!1)}});return{value:v,initialValue:c,setInitialValue:s}}(i,l.modelValue,l.form);if(!l.form){let a=function(e){var t;"value"in e&&(o.value=e.value),"errors"in e&&v(e.errors),"touched"in e&&(p.touched=null!==(t=e.touched)&&void 0!==t?t:p.touched),"initialValue"in e&&c(e.initialValue)};const{errors:d,setErrors:v}=function(){const t=e([]);return{errors:t,setErrors:e=>{t.value=J(e)}}}(),f=de>=Number.MAX_SAFE_INTEGER?0:++de,p=function(e,i,l,a){var o,s;const c=null!==(s=null===(o=null==a?void 0:a.describe)||void 0===o?void 0:o.call(a).required)&&void 0!==s&&s,d=t({touched:!1,pending:!1,valid:!0,required:c,validated:!!r(l).length,initialValue:n((()=>r(i))),dirty:n((()=>!N(r(e),r(i))))});return u(l,(e=>{d.valid=!e.length}),{immediate:!0,flush:"sync"}),d}(o,s,d,l.schema);return{id:f,path:i,value:o,initialValue:s,meta:p,flags:{pendingUnmount:{[f]:!1},pendingReset:!1},errors:d,setState:a}}const d=l.form.createPathState(i,{bails:l.bails,label:l.label,type:l.type,validate:l.validate,schema:l.schema}),v=n((()=>d.errors));return{id:Array.isArray(d.id)?d.id[d.id.length-1]:d.id,path:i,value:o,errors:v,meta:d,initialValue:s,flags:d.__flags,setState:function(e){var t,n,a;"value"in e&&(o.value=e.value),"errors"in e&&(null===(t=l.form)||void 0===t||t.setFieldError(r(i),e.errors)),"touched"in e&&(null===(n=l.form)||void 0===n||n.setFieldTouched(r(i),null!==(a=e.touched)&&void 0!==a&&a)),"initialValue"in e&&c(e.initialValue)}}}function fe(e,t,r){return M(void 0)?function(e,t,r){const i=G(_),l=void 0,a=void 0;function u(t){const r=t.handleChange,u=n((()=>{const e=s(t.value),n=s(l);return Array.isArray(e)?e.findIndex((e=>N(e,n)))>=0:N(n,e)}));function o(n,a=!0){var o,c;if(u.value===(null===(o=null==n?void 0:n.target)||void 0===o?void 0:o.checked))return void(a&&t.validate());const d=s(e),v=null==i?void 0:i.getPathState(d),f=te(n);let p=null!==(c=s(l))&&void 0!==c?c:f;i&&(null==v?void 0:v.multiple)&&"checkbox"===v.type&&(p=function(e,t,n){if(Array.isArray(e)){const n=[...e],r=n.findIndex((e=>N(e,t)));return r>=0?n.splice(r,1):n.push(t),n}return N(e,t)?n:t}(D(i.values,d)||[],p,void 0)),r(p,a)}return Object.assign(Object.assign({},t),{checked:u,checkedValue:l,uncheckedValue:a,handleChange:o})}return u(pe(e,t))}(e,t):pe(e,t)}function pe(e,t,i){const{initialValue:c,validateOnMount:d,bails:f,type:p,checkedValue:y,label:m,validateOnValueUpdate:b,uncheckedValue:O,controlled:A,keepValueOnUnmount:V,syncVModel:w,form:S}=function(e){const t=()=>({initialValue:void 0,validateOnMount:!1,bails:!0,label:void 0,validateOnValueUpdate:!0,keepValueOnUnmount:void 0,syncVModel:!1,controlled:!0}),n=void 0;return Object.assign(Object.assign({},t()),{initialValue:n})}(),F=A?G(_):void 0,M=S||F,x=n((()=>j(s(e)))),$=n((()=>{if(s(null==M?void 0:M.schema))return;const e=r(t);return U(e)||C(e)||g(e)||Array.isArray(e)?e:ne(e)})),{id:B,value:R,initialValue:T,meta:z,setState:W,errors:q,flags:H}=ve(x,{modelValue:c,form:M,bails:f,label:m,type:p,validate:$.value?ee:void 0,schema:C(t)?t:void 0}),X=n((()=>q.value[0]));w&&function({prop:e,value:t,handleChange:n,shouldValidate:r}){const i=h();if(!i||!e)return;const l="string"==typeof e?e:"modelValue",a=`update:${l}`;if(!(l in i.props))return;u(t,(e=>{N(e,he(i,l))||i.emit(a,e)})),u((()=>he(i,l)),(e=>{if(e===I&&void 0===t.value)return;const i=e===I?void 0:e;N(i,t.value)||n(i,r())}))}({value:R,prop:w,handleChange:re,shouldValidate:()=>b&&!H.pendingReset});async function J(e){var t,n;if(null==M?void 0:M.validateSchema){const{results:n}=await M.validateSchema(e);return null!==(t=n[s(x)])&&void 0!==t?t:{valid:!0,errors:[]}}return $.value?ue(R.value,$.value,{name:s(x),label:s(m),values:null!==(n=null==M?void 0:M.values)&&void 0!==n?n:{},bails:f}):{valid:!0,errors:[]}}const Y=Q((async()=>(z.pending=!0,z.validated=!0,J("validated-only"))),(e=>(H.pendingUnmount[se.id]||(W({errors:e.errors}),z.pending=!1,z.valid=e.valid),e))),Z=Q((async()=>J("silent")),(e=>(z.valid=e.valid,e)));function ee(e){return"silent"===(null==e?void 0:e.mode)?Z():Y()}function re(e,t=!0){ae(te(e),t)}function ie(e){var t;const n=e&&"value"in e?e.value:T.value;W({value:E(n),initialValue:E(n),touched:null!==(t=null==e?void 0:e.touched)&&void 0!==t&&t,errors:(null==e?void 0:e.errors)||[]}),z.pending=!1,z.validated=!1,Z()}l((()=>{if(d)return Y();M&&M.validateSchema||Z()}));const le=h();function ae(e,t=!0){R.value=le&&w?K(e,le.props.modelModifiers):e;(t?Y:Z)()}const oe=n({get:()=>R.value,set(e){ae(e,b)}}),se={id:B,name:x,label:m,value:oe,meta:z,errors:q,errorMessage:X,type:p,checkedValue:y,uncheckedValue:O,bails:f,keepValueOnUnmount:V,resetField:ie,handleReset:()=>ie(),validate:ee,handleChange:re,handleBlur:(e,t=!1)=>{z.touched=!0,t&&Y()},setState:W,setTouched:function(e){z.touched=e},setErrors:function(e){W({errors:Array.isArray(e)?e:[e]})},setValue:ae};if(o(k,se),a(t)&&"function"!=typeof r(t)&&u(t,((e,t)=>{N(e,t)||(z.validated?Y():Z())}),{deep:!0}),!M)return se;const ce=n((()=>{const e=$.value;return!e||g(e)||U(e)||C(e)||Array.isArray(e)?{}:Object.keys(e).reduce(((t,n)=>{const r=(i=e[n],Array.isArray(i)?i.filter(P):L(i).filter((e=>P(i[e]))).map((e=>i[e]))).map((e=>e.__locatorRef)).reduce(((e,t)=>{const n=D(M.values,t)||M.values[t];return void 0!==n&&(e[t]=n),e}),{});var i;return Object.assign(t,r),t}),{})}));return u(ce,((e,t)=>{if(!Object.keys(e).length)return;!N(e,t)&&(z.validated?Y():Z())})),v((()=>{var e;const t=null!==(e=s(se.keepValueOnUnmount))&&void 0!==e?e:s(M.keepValuesOnUnmount),n=s(x);if(t||!M||H.pendingUnmount[se.id])return void(null==M||M.removePathState(n,B));H.pendingUnmount[se.id]=!0;const r=M.getPathState(n);if(Array.isArray(null==r?void 0:r.id)&&(null==r?void 0:r.multiple)?null==r?void 0:r.id.includes(se.id):(null==r?void 0:r.id)===se.id){if((null==r?void 0:r.multiple)&&Array.isArray(r.value)){const e=r.value.findIndex((e=>N(e,s(se.checkedValue))));if(e>-1){const t=[...r.value];t.splice(e,1),M.setFieldValue(n,t)}Array.isArray(r.id)&&r.id.splice(r.id.indexOf(se.id),1)}else M.unsetPathValue(s(x));M.removePathState(n,B)}})),se}function he(e,t){if(e)return e.props[t]}let ye=0;const ge=["bails","fieldsCount","id","multiple","type","validate"];function me(e){const t=Object.assign({},s((null==e?void 0:e.initialValues)||{})),n=r(null==e?void 0:e.validationSchema);return n&&C(n)&&g(n.cast)?E(n.cast(t)||{}):E(t)}function be(v){var p;const h=ye++;let y=0;const m=e(!1),b=e(!1),O=e(0),A=[],w=t(me(v)),S=e([]),k=e({}),I=e({}),F=function(e){let t=null,n=[];return function(...r){const l=i((()=>{if(t!==l)return;const i=e(...r);n.forEach((e=>e(i))),n=[],t=null}));return t=l,new Promise((e=>n.push(e)))}}((()=>{I.value=S.value.reduce(((e,t)=>(e[j(s(t.path))]=t,e)),{})}));function P(e,t){const n=ve(e);if(n){if("string"==typeof e){const t=j(e);k.value[t]&&delete k.value[t]}n.errors=J(t),n.valid=!n.errors.length}else"string"==typeof e&&(k.value[j(e)]=J(t))}function M(e){L(e).forEach((t=>{P(t,e[t])}))}(null==v?void 0:v.initialErrors)&&M(v.initialErrors);const x=n((()=>{const e=S.value.reduce(((e,t)=>(t.errors.length&&(e[t.path]=t.errors),e)),{});return Object.assign(Object.assign({},k.value),e)})),$=n((()=>L(x.value).reduce(((e,t)=>{const n=x.value[t];return(null==n?void 0:n.length)&&(e[t]=n[0]),e}),{}))),R=n((()=>S.value.reduce(((e,t)=>(e[t.path]={name:t.path||"",label:t.label||""},e)),{}))),T=n((()=>S.value.reduce(((e,t)=>{var n;return e[t.path]=null===(n=t.bails)||void 0===n||n,e}),{}))),W=Object.assign({},(null==v?void 0:v.initialErrors)||{}),G=null!==(p=null==v?void 0:v.keepValuesOnUnmount)&&void 0!==p&&p,{initialValues:K,originalInitialValues:X,setInitialValues:Z}=function(t,n,r){const i=me(r),l=e(i),a=e(E(i));function u(e,r=!1){l.value=V(E(l.value)||{},E(e)),a.value=V(E(a.value)||{},E(e)),r&&t.value.forEach((e=>{if(e.touched)return;const t=D(l.value,e.path);z(n,e.path,E(t))}))}return{initialValues:l,originalInitialValues:a,setInitialValues:u}}(S,w,v),ee=function(e,i,l,a){const u={touched:"some",pending:"some",valid:"every"},o=n((()=>!N(i,r(l))));function s(){const t=e.value;return L(u).reduce(((e,n)=>{const r=u[n];return e[n]=t[r]((e=>e[n])),e}),{})}const c=t(s());return d((()=>{const e=s();c.touched=e.touched,c.valid=e.valid,c.pending=e.pending})),n((()=>Object.assign(Object.assign({initialValues:r(l)},c),{valid:c.valid&&!L(a.value).length,dirty:o.value})))}(S,w,X,$),ne=n((()=>S.value.reduce(((e,t)=>{const n=D(w,t.path);return z(e,t.path,n),e}),{}))),re=null==v?void 0:v.validationSchema;function ie(e,l){var o,c;const d=n((()=>D(K.value,s(e)))),v=I.value[s(e)],p="checkbox"===(null==l?void 0:l.type)||"radio"===(null==l?void 0:l.type);if(v&&p){v.multiple=!0;const e=y++;return Array.isArray(v.id)?v.id.push(e):v.id=[v.id,e],v.fieldsCount++,v.__flags.pendingUnmount[e]=!1,v}const h=n((()=>D(w,s(e)))),g=s(e),m=pe.findIndex((e=>e===g));-1!==m&&pe.splice(m,1);const b=n((()=>{var t,n,r,i,a,u;return C(re)?null!==(r=null===(n=(t=re).describe)||void 0===n?void 0:n.call(t,s(e)).required)&&void 0!==r&&r:!!C(null==l?void 0:l.schema)&&(null!==(u=null===(a=(i=null==l?void 0:l.schema).describe)||void 0===a?void 0:a.call(i).required)&&void 0!==u&&u)})),O=y++,A=t({id:O,path:e,touched:!1,pending:!1,valid:!0,validated:!!(null===(o=W[g])||void 0===o?void 0:o.length),required:b,initialValue:d,errors:f([]),bails:null!==(c=null==l?void 0:l.bails)&&void 0!==c&&c,label:null==l?void 0:l.label,type:(null==l?void 0:l.type)||"default",value:h,multiple:!1,__flags:{pendingUnmount:{[O]:!1},pendingReset:!1},fieldsCount:1,validate:null==l?void 0:l.validate,dirty:n((()=>!N(r(h),r(d))))});return S.value.push(A),I.value[g]=A,F(),$.value[g]&&!W[g]&&i((()=>{Ie(g,{mode:"silent"})})),a(e)&&u(e,(e=>{F();const t=E(h.value);I.value[e]=A,i((()=>{z(w,e,t)}))})),A}const le=H(Ce,5),se=H(Ce,5),ce=Q((async e=>await("silent"===e?le():se())),((e,[t])=>{const n=L(Oe.errorBag.value),r=[...new Set([...L(e.results),...S.value.map((e=>e.path)),...n])].sort().reduce(((n,r)=>{var i;const l=r,a=ve(l)||function(e){const t=S.value.filter((t=>e.startsWith(t.path)));return t.reduce(((e,t)=>e?t.path.length>e.path.length?t:e:t),void 0)}(l),u=(null===(i=e.results[l])||void 0===i?void 0:i.errors)||[],o=s(null==a?void 0:a.path)||l,c=function(e,t){if(!t)return e;return{valid:e.valid&&t.valid,errors:[...e.errors,...t.errors]}}({errors:u,valid:!u.length},n.results[o]);return n.results[o]=c,c.valid||(n.errors[o]=c.errors[0]),a&&k.value[o]&&delete k.value[o],a?(a.valid=c.valid,"silent"===t?n:"validated-only"!==t||a.validated?(P(a,c.errors),n):n):(P(o,u),n)}),{valid:e.valid,results:{},errors:{}});return e.values&&(r.values=e.values),L(r.results).forEach((e=>{var n;const i=ve(e);i&&"silent"!==t&&("validated-only"!==t||i.validated)&&P(i,null===(n=r.results[e])||void 0===n?void 0:n.errors)})),r}));function de(e){S.value.forEach(e)}function ve(e){const t="string"==typeof e?j(e):e;return"string"==typeof t?I.value[t]:t}let fe,pe=[];function he(e){return function(t,n){return function(r){return r instanceof Event&&(r.preventDefault(),r.stopPropagation()),de((e=>e.touched=!0)),m.value=!0,O.value++,ke().then((i=>{const l=E(w);if(i.valid&&"function"==typeof t){const n=E(ne.value);let a=e?n:l;return i.values&&(a=i.values),t(a,{evt:r,controlledValues:n,setErrors:M,setFieldError:P,setTouched:Se,setFieldTouched:we,setValues:Ve,setFieldValue:Ae,resetForm:_e,resetField:Ee})}i.valid||"function"!=typeof n||n({values:l,evt:r,errors:i.errors,results:i.results})})).then((e=>(m.value=!1,e)),(e=>{throw m.value=!1,e}))}}}const be=he(!1);be.withControlled=he(!0);const Oe={formId:h,values:w,controlledValues:ne,errorBag:x,errors:$,schema:re,submitCount:O,meta:ee,isSubmitting:m,isValidating:b,fieldArrays:A,keepValuesOnUnmount:G,validateSchema:r(re)?ce:void 0,validate:ke,setFieldError:P,validateField:Ie,setFieldValue:Ae,setValues:Ve,setErrors:M,setFieldTouched:we,setTouched:Se,resetForm:_e,resetField:Ee,handleSubmit:be,useFieldModel:function(e){if(!Array.isArray(e))return je(e);return e.map((e=>je(e,!0)))},defineInputBinds:function(e,t){const[r,i]=Me(e,t);function l(){i.value.onBlur()}function a(t){const n=te(t);Ae(s(e),n,!1),i.value.onInput()}function u(t){const n=te(t);Ae(s(e),n,!1),i.value.onChange()}return n((()=>Object.assign(Object.assign({},i.value),{onBlur:l,onInput:a,onChange:u,value:r.value})))},defineComponentBinds:function(e,t){const[r,i]=Me(e,t),l=ve(s(e));function a(e){r.value=e}return n((()=>{const e=g(t)?t(Y(l,ge)):t||{};return Object.assign({[e.model||"modelValue"]:r.value,[`onUpdate:${e.model||"modelValue"}`]:a},i.value)}))},defineField:Me,stageInitialValue:function(e,t,n=!1){Pe(e,t),z(w,e,t),n&&!(null==v?void 0:v.initialValues)&&z(X.value,e,E(t))},unsetInitialValue:Fe,setFieldInitialValue:Pe,createPathState:ie,getPathState:ve,unsetPathValue:function(e){return pe.push(e),fe||(fe=i((()=>{[...pe].sort().reverse().forEach((e=>{q(w,e)})),pe=[],fe=null}))),fe},removePathState:function(e,t){const n=S.value.findIndex((n=>n.path===e&&(Array.isArray(n.id)?n.id.includes(t):n.id===t))),r=S.value[n];if(-1!==n&&r){if(i((()=>{Ie(e,{mode:"silent",warn:!1})})),r.multiple&&r.fieldsCount&&r.fieldsCount--,Array.isArray(r.id)){const e=r.id.indexOf(t);e>=0&&r.id.splice(e,1),delete r.__flags.pendingUnmount[t]}(!r.multiple||r.fieldsCount<=0)&&(S.value.splice(n,1),Fe(e),F(),delete I.value[e])}},initialValues:K,getAllPathStates:()=>S.value,destroyPath:function(e){L(I.value).forEach((t=>{t.startsWith(e)&&delete I.value[t]})),S.value=S.value.filter((t=>!t.path.startsWith(e))),i((()=>{F()}))},isFieldTouched:function(e){const t=ve(e);if(t)return t.touched;return S.value.filter((t=>t.path.startsWith(e))).some((e=>e.touched))},isFieldDirty:function(e){const t=ve(e);if(t)return t.dirty;return S.value.filter((t=>t.path.startsWith(e))).some((e=>e.dirty))},isFieldValid:function(e){const t=ve(e);if(t)return t.valid;return S.value.filter((t=>t.path.startsWith(e))).every((e=>e.valid))}};function Ae(e,t,n=!0){const r=E(t),i="string"==typeof e?e:e.path;ve(i)||ie(i),z(w,i,r),n&&Ie(i)}function Ve(e,t=!0){V(w,e),A.forEach((e=>e&&e.reset())),t&&ke()}function je(e,t){const r=ve(s(e))||ie(e);return n({get:()=>r.value,set(n){var r;Ae(s(e),n,null!==(r=s(t))&&void 0!==r&&r)}})}function we(e,t){const n=ve(e);n&&(n.touched=t)}function Se(e){"boolean"!=typeof e?L(e).forEach((t=>{we(t,!!e[t])})):de((t=>{t.touched=e}))}function Ee(e,t){var n;const r=t&&"value"in t?t.value:D(K.value,e),l=ve(e);l&&(l.__flags.pendingReset=!0),Pe(e,E(r),!0),Ae(e,r,!1),we(e,null!==(n=null==t?void 0:t.touched)&&void 0!==n&&n),P(e,(null==t?void 0:t.errors)||[]),i((()=>{l&&(l.__flags.pendingReset=!1)}))}function _e(e,t){let n=E((null==e?void 0:e.values)?e.values:X.value);n=(null==t?void 0:t.force)?n:V(X.value,n),n=C(re)&&g(re.cast)?re.cast(n):n,Z(n),de((t=>{var r;t.__flags.pendingReset=!0,t.validated=!1,t.touched=(null===(r=null==e?void 0:e.touched)||void 0===r?void 0:r[t.path])||!1,Ae(t.path,D(n,t.path),!1),P(t.path,void 0)})),(null==t?void 0:t.force)?function(e,t=!0){L(w).forEach((e=>{delete w[e]})),L(e).forEach((t=>{Ae(t,e[t],!1)})),t&&ke()}(n,!1):Ve(n,!1),M((null==e?void 0:e.errors)||{}),O.value=(null==e?void 0:e.submitCount)||0,i((()=>{ke({mode:"silent"}),de((e=>{e.__flags.pendingReset=!1}))}))}async function ke(e){const t=(null==e?void 0:e.mode)||"force";if("force"===t&&de((e=>e.validated=!0)),Oe.validateSchema)return Oe.validateSchema(t);b.value=!0;const n=await Promise.all(S.value.map((t=>t.validate?t.validate(e).then((e=>({key:t.path,valid:e.valid,errors:e.errors}))):Promise.resolve({key:t.path,valid:!0,errors:[]}))));b.value=!1;const r={},i={};for(const l of n)r[l.key]={valid:l.valid,errors:l.errors},l.errors.length&&(i[l.key]=l.errors[0]);return{valid:n.every((e=>e.valid)),results:r,errors:i}}async function Ie(e,t){const n=ve(e);if(n&&"silent"!==(null==t?void 0:t.mode)&&(n.validated=!0),re){const{results:n}=await ce((null==t?void 0:t.mode)||"validated-only");return n[e]||{errors:[],valid:!0}}return(null==n?void 0:n.validate)?n.validate(t):(!n&&(null==t?void 0:t.warn),Promise.resolve({errors:[],valid:!0}))}function Fe(e){q(K.value,e)}function Pe(e,t,n=!1){z(K.value,e,E(t)),n&&z(X.value,e,E(t))}async function Ce(){const e=r(re);if(!e)return{valid:!0,results:{},errors:{}};b.value=!0;const t=U(e)||C(e)?await async function(e,t){const n=C(e)?e:oe(e),r=await n.parse(E(t)),i={},l={};for(const a of r.errors){const e=a.errors,t=(a.path||"").replace(/\["(\d+)"\]/g,((e,t)=>`[${t}]`));i[t]={valid:!e.length,errors:e},e.length&&(l[t]=e[0])}return{valid:!r.errors.length,results:i,errors:l,values:r.value}}(e,w):await async function(e,t,n){const r=L(e).map((async r=>{var i,l,a;const u=null===(i=null==n?void 0:n.names)||void 0===i?void 0:i[r],o=await ue(D(t,r),e[r],{name:(null==u?void 0:u.name)||r,label:null==u?void 0:u.label,values:t,bails:null===(a=null===(l=null==n?void 0:n.bailsMap)||void 0===l?void 0:l[r])||void 0===a||a});return Object.assign(Object.assign({},o),{path:r})}));let i=!0;const l=await Promise.all(r),a={},u={};for(const o of l)a[o.path]={valid:o.valid,errors:o.errors},o.valid||(i=!1,u[o.path]=o.errors[0]);return{valid:i,results:a,errors:u}}(e,w,{names:R.value,bailsMap:T.value});return b.value=!1,t}const Ue=be(((e,{evt:t})=>{(function(e){return B(e)&&e.target&&"submit"in e.target})(t)&&t.target.submit()}));function Me(e,t){const r=g(t)||null==t?void 0:t.label,l=ve(s(e))||ie(e,{label:r}),a=()=>g(t)?t(Y(l,ge)):t||{};function u(){var e;l.touched=!0;(null!==(e=a().validateOnBlur)&&void 0!==e?e:ae().validateOnBlur)&&Ie(l.path)}function o(){var e;(null!==(e=a().validateOnInput)&&void 0!==e?e:ae().validateOnInput)&&i((()=>{Ie(l.path)}))}function c(){var e;(null!==(e=a().validateOnChange)&&void 0!==e?e:ae().validateOnChange)&&i((()=>{Ie(l.path)}))}const d=n((()=>{const e={onChange:c,onInput:o,onBlur:u};return g(t)?Object.assign(Object.assign({},e),t(Y(l,ge)).props||{}):(null==t?void 0:t.props)?Object.assign(Object.assign({},e),t.props(Y(l,ge))):e}));return[je(e,(()=>{var e,t,n;return null===(n=null!==(e=a().validateOnModelUpdate)&&void 0!==e?e:null===(t=ae())||void 0===t?void 0:t.validateOnModelUpdate)||void 0===n||n})),d]}return l((()=>{(null==v?void 0:v.initialErrors)&&M(v.initialErrors),(null==v?void 0:v.initialTouched)&&Se(v.initialTouched),(null==v?void 0:v.validateOnMount)?ke():Oe.validateSchema&&Oe.validateSchema("silent")})),a(re)&&u(re,(()=>{var e;null===(e=Oe.validateSchema)||void 0===e||e.call(Oe,"validated-only")})),o(_,Oe),Object.assign(Object.assign({},Oe),{values:c(w),handleReset:()=>_e(),submitForm:Ue})}function Oe(t){const n=G(_,void 0),i=e([]),l=()=>{},a={fields:i,remove:l,push:l,swap:l,insert:l,update:l,replace:l,prepend:l,move:l};if(!n)return a;if(!r(t))return a;const o=n.fieldArrays.find((e=>r(e.path)===r(t)));if(o)return o;let c=0;function d(){return D(null==n?void 0:n.values,s(t),[])||[]}function f(){const e=d();Array.isArray(e)&&(i.value=e.map(((e,t)=>h(e,t,i.value))),p())}function p(){const e=i.value.length;for(let t=0;t<e;t++){const n=i.value[t];n.isFirst=0===t,n.isLast=t===e-1}}function h(e,r,l){if(l&&!m(r)&&l[r])return l[r];const a=c++;return{key:a,value:X({get(){const r=D(null==n?void 0:n.values,s(t),[])||[],l=i.value.findIndex((e=>e.key===a));return-1===l?e:r[l]},set(e){const t=i.value.findIndex((e=>e.key===a));-1!==t&&g(t,e)}}),isFirst:!1,isLast:!1}}function y(){p(),null==n||n.validate({mode:"silent"})}function g(e,r){const i=s(t),l=D(null==n?void 0:n.values,i);!Array.isArray(l)||l.length-1<e||(z(n.values,`${i}[${e}]`,r),null==n||n.validate({mode:"validated-only"}))}f();const b={fields:i,remove:function(e){const r=s(t),l=D(null==n?void 0:n.values,r);if(!l||!Array.isArray(l))return;const a=[...l];a.splice(e,1);const u=r+`[${e}]`;n.destroyPath(u),n.unsetInitialValue(u),z(n.values,r,a),i.value.splice(e,1),y()},push:function(e){const r=E(e),l=s(t),a=D(null==n?void 0:n.values,l),u=m(a)?[]:a;if(!Array.isArray(u))return;const o=[...u];o.push(r),n.stageInitialValue(l+`[${o.length-1}]`,r),z(n.values,l,o),i.value.push(h(r)),y()},swap:function(e,r){const l=s(t),a=D(null==n?void 0:n.values,l);if(!Array.isArray(a)||!(e in a)||!(r in a))return;const u=[...a],o=[...i.value],c=u[e];u[e]=u[r],u[r]=c;const d=o[e];o[e]=o[r],o[r]=d,z(n.values,l,u),i.value=o,p()},insert:function(e,r){const l=E(r),a=s(t),u=D(null==n?void 0:n.values,a);if(!Array.isArray(u)||u.length<e)return;const o=[...u],c=[...i.value];o.splice(e,0,l),c.splice(e,0,h(l)),z(n.values,a,o),i.value=c,y()},update:g,replace:function(e){const r=s(t);n.stageInitialValue(r,e),z(n.values,r,e),f(),y()},prepend:function(e){const r=E(e),l=s(t),a=D(null==n?void 0:n.values,l),u=m(a)?[]:a;if(!Array.isArray(u))return;const o=[r,...u];z(n.values,l,o),n.stageInitialValue(l+"[0]",r),i.value.unshift(h(r)),y()},move:function(e,r){const l=s(t),a=D(null==n?void 0:n.values,l),u=m(a)?[]:[...a];if(!Array.isArray(a)||!(e in a)||!(r in a))return;const o=[...i.value],c=o[e];o.splice(e,1),o.splice(r,0,c);const d=u[e];u.splice(e,1),u.splice(r,0,d),z(n.values,l,u),i.value=o,y()}};return n.fieldArrays.push(Object.assign({path:t,reset:f},b)),v((()=>{const e=n.fieldArrays.findIndex((e=>s(e.path)===s(t)));e>=0&&n.fieldArrays.splice(e,1)})),u(d,(e=>{N(e,i.value.map((e=>e.value)))||f()})),b}const Ae=Symbol();function Ve(t={}){const n=y(t,{create:!0,inherit:!0});if(r(n.inherit)){const e=p(Ae,void 0);if(e)return e}const i=r(n.help)?r(n.help)+": ":"";if(!r(n.create))throw new Error(`${i}useVFieldContext (create = false) must be used inside a VField component`);return function(t){const n=e(s(t)),r=e();u((()=>s(t)),(e=>{n.value=e||`v-field-${crypto.randomUUID()}`})),t&&(r.value=fe(t));const i={id:n,field:r};return o(Ae,i),i}(n.id)}export{Ve as a,Oe as b,T as c,fe as d,x as i,be as u};
