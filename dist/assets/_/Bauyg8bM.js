import{aB as t}from"../../index-BnGzoMia.js";import{s as e}from"./CvSG9YTx.js";/* empty css        */function n(t){if(t)throw t}var o=Object.prototype.hasOwnProperty,r=Object.prototype.toString,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===r.call(t)},a=function(t){if(!t||"[object Object]"!==r.call(t))return!1;var e,n=o.call(t,"constructor"),i=t.constructor&&t.constructor.prototype&&o.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!i)return!1;for(e in t);return void 0===e||o.call(t,e)},h=function(t,e){i&&"__proto__"===e.name?i(t,e.name,{enumerable:!0,configurable:!0,value:e.newValue,writable:!0}):t[e.name]=e.newValue},f=function(t,e){if("__proto__"===e){if(!o.call(t,e))return;if(s)return s(t,e).value}return t[e]};const l=t((function t(){var e,n,o,r,i,s,l=arguments[0],u=1,p=arguments.length,d=!1;for("boolean"==typeof l&&(d=l,l=arguments[1]||{},u=2),(null==l||"object"!=typeof l&&"function"!=typeof l)&&(l={});u<p;++u)if(null!=(e=arguments[u]))for(n in e)o=f(l,n),l!==(r=f(e,n))&&(d&&r&&(a(r)||(i=c(r)))?(i?(i=!1,s=o&&c(o)?o:[]):s=o&&a(o)?o:{},h(l,{name:n,newValue:t(d,s,r)})):void 0!==r&&h(l,{name:n,newValue:r}));return l}));function u(t){if("object"!=typeof t||null===t)return!1;const e=Object.getPrototypeOf(t);return!(null!==e&&e!==Object.prototype&&null!==Object.getPrototypeOf(e)||Symbol.toStringTag in t||Symbol.iterator in t)}function p(){const t=[],e={run:function(...e){let n=-1;const o=e.pop();if("function"!=typeof o)throw new TypeError("Expected function as last argument, not "+o);!function r(i,...s){const c=t[++n];let a=-1;if(i)o(i);else{for(;++a<e.length;)null!==s[a]&&void 0!==s[a]||(s[a]=e[a]);e=s,c?function(t,e){let n;return o;function o(...e){const o=t.length>e.length;let c;o&&e.push(r);try{c=t.apply(this,e)}catch(i){if(o&&n)throw i;return r(i)}o||(c&&c.then&&"function"==typeof c.then?c.then(s,r):c instanceof Error?r(c):s(c))}function r(t,...o){n||(n=!0,e(t,...o))}function s(t){r(null,t)}}(c,r)(...s):o(null,...s)}}(null,...e)},use:function(n){if("function"!=typeof n)throw new TypeError("Expected `middelware` to be a function, not "+n);return t.push(n),e}};return e}class d extends Error{constructor(t,n,o){super(),"string"==typeof n&&(o=n,n=void 0);let r="",i={},s=!1;if(n&&(i="line"in n&&"column"in n||"start"in n&&"end"in n?{place:n}:"type"in n?{ancestors:[n],place:n.position}:{...n}),"string"==typeof t?r=t:!i.cause&&t&&(s=!0,r=t.message,i.cause=t),!i.ruleId&&!i.source&&"string"==typeof o){const t=o.indexOf(":");-1===t?i.ruleId=o:(i.source=o.slice(0,t),i.ruleId=o.slice(t+1))}if(!i.place&&i.ancestors&&i.ancestors){const t=i.ancestors[i.ancestors.length-1];t&&(i.place=t.position)}const c=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=c?c.column:void 0,this.fatal=void 0,this.file,this.message=r,this.line=c?c.line:void 0,this.name=e(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=s&&i.cause&&"string"==typeof i.cause.stack?i.cause.stack:"",this.actual,this.expected,this.note,this.url}}d.prototype.file="",d.prototype.name="",d.prototype.reason="",d.prototype.message="",d.prototype.stack="",d.prototype.column=void 0,d.prototype.line=void 0,d.prototype.ancestors=void 0,d.prototype.cause=void 0,d.prototype.fatal=void 0,d.prototype.place=void 0,d.prototype.ruleId=void 0,d.prototype.source=void 0;const y={basename:function(t,e){if(void 0!==e&&"string"!=typeof e)throw new TypeError('"ext" argument must be a string');m(t);let n,o=0,r=-1,i=t.length;if(void 0===e||0===e.length||e.length>t.length){for(;i--;)if(47===t.codePointAt(i)){if(n){o=i+1;break}}else r<0&&(n=!0,r=i+1);return r<0?"":t.slice(o,r)}if(e===t)return"";let s=-1,c=e.length-1;for(;i--;)if(47===t.codePointAt(i)){if(n){o=i+1;break}}else s<0&&(n=!0,s=i+1),c>-1&&(t.codePointAt(i)===e.codePointAt(c--)?c<0&&(r=i):(c=-1,r=s));o===r?r=s:r<0&&(r=t.length);return t.slice(o,r)},dirname:function(t){if(m(t),0===t.length)return".";let e,n=-1,o=t.length;for(;--o;)if(47===t.codePointAt(o)){if(e){n=o;break}}else e||(e=!0);return n<0?47===t.codePointAt(0)?"/":".":1===n&&47===t.codePointAt(0)?"//":t.slice(0,n)},extname:function(t){m(t);let e,n=t.length,o=-1,r=0,i=-1,s=0;for(;n--;){const c=t.codePointAt(n);if(47!==c)o<0&&(e=!0,o=n+1),46===c?i<0?i=n:1!==s&&(s=1):i>-1&&(s=-1);else if(e){r=n+1;break}}if(i<0||o<0||0===s||1===s&&i===o-1&&i===r+1)return"";return t.slice(i,o)},join:function(...t){let e,n=-1;for(;++n<t.length;)m(t[n]),t[n]&&(e=void 0===e?t[n]:e+"/"+t[n]);return void 0===e?".":function(t){m(t);const e=47===t.codePointAt(0);let n=function(t,e){let n,o,r="",i=0,s=-1,c=0,a=-1;for(;++a<=t.length;){if(a<t.length)n=t.codePointAt(a);else{if(47===n)break;n=47}if(47===n){if(s===a-1||1===c);else if(s!==a-1&&2===c){if(r.length<2||2!==i||46!==r.codePointAt(r.length-1)||46!==r.codePointAt(r.length-2))if(r.length>2){if(o=r.lastIndexOf("/"),o!==r.length-1){o<0?(r="",i=0):(r=r.slice(0,o),i=r.length-1-r.lastIndexOf("/")),s=a,c=0;continue}}else if(r.length>0){r="",i=0,s=a,c=0;continue}e&&(r=r.length>0?r+"/..":"..",i=2)}else r.length>0?r+="/"+t.slice(s+1,a):r=t.slice(s+1,a),i=a-s-1;s=a,c=0}else 46===n&&c>-1?c++:c=-1}return r}(t,!e);0!==n.length||e||(n=".");n.length>0&&47===t.codePointAt(t.length-1)&&(n+="/");return e?"/"+n:n}(e)},sep:"/"};function m(t){if("string"!=typeof t)throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const g={cwd:function(){return"/"}};function w(t){return Boolean(null!==t&&"object"==typeof t&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&void 0===t.auth)}function b(t){if("string"==typeof t)t=new URL(t);else if(!w(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if("file:"!==t.protocol){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return function(t){if(""!==t.hostname){const t=new TypeError('File URL host must be "localhost" or empty on darwin');throw t.code="ERR_INVALID_FILE_URL_HOST",t}const e=t.pathname;let n=-1;for(;++n<e.length;)if(37===e.codePointAt(n)&&50===e.codePointAt(n+1)){const t=e.codePointAt(n+2);if(70===t||102===t){const t=new TypeError("File URL path must not include encoded / characters");throw t.code="ERR_INVALID_FILE_URL_PATH",t}}return decodeURIComponent(e)}(t)}const v=["history","path","basename","stem","extname","dirname"];class E{constructor(t){let e;e=t?w(t)?{path:t}:"string"==typeof t||function(t){return Boolean(t&&"object"==typeof t&&"byteLength"in t&&"byteOffset"in t)}(t)?{value:t}:t:{},this.cwd="cwd"in e?"":g.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n,o=-1;for(;++o<v.length;){const t=v[o];t in e&&void 0!==e[t]&&null!==e[t]&&(this[t]="history"===t?[...e[t]]:e[t])}for(n in e)v.includes(n)||(this[n]=e[n])}get basename(){return"string"==typeof this.path?y.basename(this.path):void 0}set basename(t){A(t,"basename"),P(t,"basename"),this.path=y.join(this.dirname||"",t)}get dirname(){return"string"==typeof this.path?y.dirname(this.path):void 0}set dirname(t){x(this.basename,"dirname"),this.path=y.join(t||"",this.basename)}get extname(){return"string"==typeof this.path?y.extname(this.path):void 0}set extname(t){if(P(t,"extname"),x(this.dirname,"extname"),t){if(46!==t.codePointAt(0))throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=y.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){w(t)&&(t=b(t)),A(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return"string"==typeof this.path?y.basename(this.path,this.extname):void 0}set stem(t){A(t,"stem"),P(t,"stem"),this.path=y.join(this.dirname||"",t+(this.extname||""))}fail(t,e,n){const o=this.message(t,e,n);throw o.fatal=!0,o}info(t,e,n){const o=this.message(t,e,n);return o.fatal=void 0,o}message(t,e,n){const o=new d(t,e,n);return this.path&&(o.name=this.path+":"+o.name,o.file=this.path),o.fatal=!1,this.messages.push(o),o}toString(t){if(void 0===this.value)return"";if("string"==typeof this.value)return this.value;return new TextDecoder(t||void 0).decode(this.value)}}function P(t,e){if(t&&t.includes(y.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+y.sep+"`")}function A(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function x(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}const j=function(t){const e=this.constructor.prototype,n=e[t],o=function(){return n.apply(o,arguments)};Object.setPrototypeOf(o,e);const r=Object.getOwnPropertyNames(n);for(const i of r){const t=Object.getOwnPropertyDescriptor(n,i);t&&Object.defineProperty(o,i,t)}return o},O={}.hasOwnProperty;class I extends j{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=p()}copy(){const t=new I;let e=-1;for(;++e<this.attachers.length;){const n=this.attachers[e];t.use(...n)}return t.data(l(!0,{},this.namespace)),t}data(t,e){return"string"==typeof t?2===arguments.length?(z("data",this.frozen),this.namespace[t]=e,this):O.call(this.namespace,t)&&this.namespace[t]||void 0:t?(z("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[e,...n]=this.attachers[this.freezeIndex];if(!1===n[0])continue;!0===n[0]&&(n[0]=void 0);const o=e.call(t,...n);"function"==typeof o&&this.transformers.use(o)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const e=k(t),n=this.parser||this.Parser;return _("parse",n),n(String(e),e)}process(t,e){const n=this;return this.freeze(),_("process",this.parser||this.Parser),R("process",this.compiler||this.Compiler),e?o(void 0,e):new Promise(o);function o(o,r){const i=k(t),s=n.parse(i);function c(t,n){t||!n?r(t):o?o(n):e(void 0,n)}n.run(s,i,(function(t,e,o){if(t||!e||!o)return c(t);const r=e,i=n.stringify(r,o);var s;"string"==typeof(s=i)||function(t){return Boolean(t&&"object"==typeof t&&"byteLength"in t&&"byteOffset"in t)}(s)?o.value=i:o.result=i,c(t,o)}))}}processSync(t){let e,o=!1;return this.freeze(),_("processSync",this.parser||this.Parser),R("processSync",this.compiler||this.Compiler),this.process(t,(function(t,r){o=!0,n(t),e=r})),L("processSync","process",o),e}run(t,e,n){S(t),this.freeze();const o=this.transformers;return n||"function"!=typeof e||(n=e,e=void 0),n?r(void 0,n):new Promise(r);function r(r,i){const s=k(e);o.run(t,s,(function(e,o,s){const c=o||t;e?i(e):r?r(c):n(void 0,c,s)}))}}runSync(t,e){let o,r=!1;return this.run(t,e,(function(t,e){n(t),o=e,r=!0})),L("runSync","run",r),o}stringify(t,e){this.freeze();const n=k(e),o=this.compiler||this.Compiler;return R("stringify",o),S(t),o(t,n)}use(t,...e){const n=this.attachers,o=this.namespace;if(z("use",this.frozen),null==t);else if("function"==typeof t)c(t,e);else{if("object"!=typeof t)throw new TypeError("Expected usable value, not `"+t+"`");Array.isArray(t)?s(t):i(t)}return this;function r(t){if("function"==typeof t)c(t,[]);else{if("object"!=typeof t)throw new TypeError("Expected usable value, not `"+t+"`");if(Array.isArray(t)){const[e,...n]=t;c(e,n)}else i(t)}}function i(t){if(!("plugins"in t)&&!("settings"in t))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");s(t.plugins),t.settings&&(o.settings=l(!0,o.settings,t.settings))}function s(t){let e=-1;if(null==t);else{if(!Array.isArray(t))throw new TypeError("Expected a list of plugins, not `"+t+"`");for(;++e<t.length;){r(t[e])}}}function c(t,e){let o=-1,r=-1;for(;++o<n.length;)if(n[o][0]===t){r=o;break}if(-1===r)n.push([t,...e]);else if(e.length>0){let[o,...i]=e;const s=n[r][1];u(s)&&u(o)&&(o=l(!0,s,o)),n[r]=[t,o,...i]}}}}const T=(new I).freeze();function _(t,e){if("function"!=typeof e)throw new TypeError("Cannot `"+t+"` without `parser`")}function R(t,e){if("function"!=typeof e)throw new TypeError("Cannot `"+t+"` without `compiler`")}function z(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function S(t){if(!u(t)||"string"!=typeof t.type)throw new TypeError("Expected node, got `"+t+"`")}function L(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function k(t){return function(t){return Boolean(t&&"object"==typeof t&&"message"in t&&"messages"in t)}(t)?t:new E(t)}export{T as unified};
