const t=/#/g,e=/&/g,r=/\//g,n=/=/g,c=/\+/g,o=/%5e/gi,a=/%60/gi,s=/%7c/gi,i=/%20/gi,u=/%2f/gi;function h(n){return(u="string"==typeof n?n:JSON.stringify(n),encodeURI(""+u).replace(s,"|")).replace(c,"%2B").replace(i,"+").replace(t,"%23").replace(e,"%26").replace(a,"`").replace(o,"^").replace(r,"%2F");var u}function f(t){return h(t).replace(n,"%3D")}function l(t=""){try{return decodeURIComponent(""+t)}catch{return""+t}}function p(t){return l(t.replace(u,"%252F"))}function g(t){return l(t.replace(c," "))}function m(t=""){const e={};"?"===t[0]&&(t=t.slice(1));for(const r of t.split("&")){const t=r.match(/([^=]+)=?(.*)/)||[];if(t.length<2)continue;const n=l(t[1].replace(c," "));if("__proto__"===n||"constructor"===n)continue;const o=g(t[2]||"");void 0===e[n]?e[n]=o:Array.isArray(e[n])?e[n].push(o):e[n]=[e[n],o]}return e}function y(t){return Object.keys(t).filter((e=>void 0!==t[e])).map((e=>{return r=e,"number"!=typeof(n=t[e])&&"boolean"!=typeof n||(n=String(n)),n?Array.isArray(n)?n.map((t=>`${f(r)}=${h(t)}`)).join("&"):`${f(r)}=${h(n)}`:f(r);var r,n})).filter(Boolean).join("&")}const v=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,b=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,d=/^([/\\]\s*){2,}[^/\\]/,w=/^\.?\//;function R(t,e={}){return"boolean"==typeof e&&(e={acceptRelative:e}),e.strict?v.test(t):b.test(t)||!!e.acceptRelative&&d.test(t)}function W(t="",e){return(function(t="",e){return t.endsWith("/")}(t)?t.slice(0,-1):t)||"/"}function j(t="",e){return t.endsWith("/")?t:t+"/"}function A(t=""){return function(t=""){return t.startsWith("/")}(t)?t:"/"+t}function $(t,e){if(x(e)||R(t))return t;const r=W(e);return t.startsWith(r)?t:B(r,t)}function _(t,e){if(x(e))return t;const r=W(e);if(!t.startsWith(r))return t;const n=t.slice(r.length);return"/"===n[0]?n:"/"+n}function C(t,e){const r=I(t),n={...m(r.search),...e};return r.search=y(n),function(t){const e=t.pathname||"",r=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",n=t.hash||"",c=t.auth?t.auth+"@":"",o=t.host||"",a=t.protocol||t[F]?(t.protocol||"")+"//":"";return a+c+o+e+r+n}(r)}function S(t){return m(I(t).search)}function x(t){return!t||"/"===t}function B(t,...e){let r=t||"";for(const n of e.filter((t=>function(t){return t&&"/"!==t}(t))))if(r){const t=n.replace(w,"");r=j(r)+t}else r=n;return r}const F=Symbol.for("ufo:protocolRelative");function I(t="",e){const r=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(r){const[,t,e=""]=r;return{protocol:t.toLowerCase(),pathname:e,href:t+e,auth:"",host:"",search:"",hash:""}}if(!R(t,{acceptRelative:!0}))return e?I(e+t):L(t);const[,n="",c,o=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[],[,a="",s=""]=o.match(/([^#/?]*)(.*)?/)||[],{pathname:i,search:u,hash:h}=L(s.replace(/\/(?=[A-Za-z]:)/,""));return{protocol:n.toLowerCase(),auth:c?c.slice(0,Math.max(0,c.length-1)):"",host:a,pathname:i,search:u,hash:h,[F]:!n}}function L(t=""){const[e="",r="",n=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:r,hash:n}}export{p as a,A as b,_ as c,l as d,$ as e,C as f,S as g,B as j,I as p,W as w};
