import{_ as e}from"./BEoojC2K.js";import{_ as t}from"./LQmerVSA.js";import{_ as a}from"./BhfiZcyb.js";import{_ as l}from"./ZiQZdQ7P.js";import{_ as o}from"./B1nunnCQ.js";import{_ as d}from"./BBfFe7QG.js";import{_ as r}from"./gfZgleAp.js";import{e as s,W as u,S as c,a as n,Z as i,o as p,z as m,g as f,A as _,l as g,v as y,k as j,s as V,H as h,u as P,D as v,a2 as U}from"../../index-BnGzoMia.js";import{c as A}from"./PANFtK5j.js";import"./Bx6q4Kdm.js";import"./wk-d1_ZX.js";import"./VIMGMjZ5.js";import"./D5UZqAJ_.js";import"./h5PKOuzv.js";import"./iUM7Auia.js";/* empty css        */const I={class:"columns is-multiline"},S=U(s({__name:"AddUpdateProduct",props:{openProductModal:{type:Boolean,default:!1},productId:{default:""}},emits:["update:closeModalHandler","update:callOnSuccess"],setup(s,{emit:U}){const S=u(),b=c(),w=n(!1),M=i(),q=s,x=U,D=()=>{x("update:closeModalHandler",!1)},E=n([]),H=n({name:"",description:"",price:"",quantity:"",tag:[],store:M.loggedStore.id});p((()=>{q.productId&&(async()=>{if(q.productId)try{w.value=!0;const{data:e}=await b.get(`/product/${q.productId}/`);H.value={...e,tag:(Array.isArray(e.tag),e.tag),store:e.store||M.loggedStore.id},E.value=e.tag}catch(e){console.error("Error fetching product data:",e),S.error("Failed to load product details.")}finally{w.value=!1}})()}));const N=async()=>{try{w.value=!0;const e={...H.value,tag:JSON.stringify(H.value.tag)};q.productId?(await b.patch(`/product/${q.productId}/`,A(e,"")),S.success("Product updated successfully")):(await b.post("/product/",A(e,"")),S.success("Product added successfully")),D(),x("update:callOnSuccess",null)}catch(e){console.error("Error while adding/updating product:",e),S.error("An error occurred. Please try again.")}finally{w.value=!1}};return(s,u)=>{const c=r,n=d,i=o,p=l,U=m("Multiselect"),A=a,S=t,b=e;return f(),_(b,{is:"form",open:q.openProductModal,size:"medium",actions:"right",title:"Product Information",onSubmit:v(N,["prevent"]),onClose:D},{content:g((()=>[y("div",I,[j(p,{class:"column is-6"},{default:g((()=>[j(c,null,{default:g((()=>[V("Product Name")])),_:1}),j(i,null,{default:g((()=>[j(n,{modelValue:h(H).name,"onUpdate:modelValue":u[0]||(u[0]=e=>h(H).name=e),type:"text",placeholder:"Product Name"},null,8,["modelValue"])])),_:1})])),_:1}),j(p,{class:"column is-6"},{default:g((()=>[j(c,null,{default:g((()=>[V("Price (Unit)")])),_:1}),j(i,null,{default:g((()=>[j(n,{modelValue:h(H).price,"onUpdate:modelValue":u[1]||(u[1]=e=>h(H).price=e),type:"number",placeholder:"Unit Price"},null,8,["modelValue"])])),_:1})])),_:1}),j(p,{class:"column is-6"},{default:g((()=>[j(c,null,{default:g((()=>[V("Quantity")])),_:1}),j(i,null,{default:g((()=>[j(n,{modelValue:h(H).quantity,"onUpdate:modelValue":u[2]||(u[2]=e=>h(H).quantity=e),type:"number",placeholder:"Quantity"},null,8,["modelValue"])])),_:1})])),_:1}),j(p,{class:"column is-6"},{default:g((({id:e})=>[j(c,null,{default:g((()=>[V("Tags")])),_:1}),j(i,null,{default:g((()=>[j(U,{modelValue:h(H).tag,"onUpdate:modelValue":u[3]||(u[3]=e=>h(H).tag=e),attrs:{id:e},mode:"tags",searchable:!0,"create-tag":!0,options:h(E),placeholder:"Add tags"},null,8,["modelValue","attrs","options"])])),_:2},1024)])),_:1}),j(p,{class:"column is-12"},{default:g((()=>[j(c,null,{default:g((()=>[V("Description")])),_:1}),j(i,null,{default:g((()=>[j(A,{modelValue:h(H).description,"onUpdate:modelValue":u[4]||(u[4]=e=>h(H).description=e),type:"text",rows:"2",placeholder:"Description"},null,8,["modelValue"])])),_:1})])),_:1})])])),action:g((()=>[j(S,{type:"submit",color:"primary"},{default:g((()=>[V(P(q.productId?"Update":"Add")+" Product ",1)])),_:1})])),cancel:g((()=>[])),_:1},8,["open"])}}}),[["__file","AddUpdateProduct.vue"]]);export{S as default};
