import{s as t}from"./Dvmd-DKe.js";import{b as e}from"./CVUg9P9R.js";const a=["ariaDescribedBy","ariaLabel","ariaLabelledBy"],r={ancestors:{tbody:["table"],td:["table"],th:["table"],thead:["table"],tfoot:["table"],tr:["table"]},attributes:{a:[...a,"dataFootnoteBackref","dataFootnoteRef",["className","data-footnote-backref"],"href"],blockquote:["cite"],code:[["className",/^language-./]],del:["cite"],div:["itemScope","itemType"],dl:[...a],h2:[["className","sr-only"]],img:[...a,"longDesc","src"],input:[["disabled",!0],["type","checkbox"]],ins:["cite"],li:[["className","task-list-item"]],ol:[...a,["className","contains-task-list"]],q:["cite"],section:["dataFootnotes",["className","footnotes"]],source:["srcSet"],summary:[...a],table:[...a],ul:[...a,["className","contains-task-list"]],"*":["abbr","accept","acceptCharset","accessKey","action","align","alt","axis","border","cellPadding","cellSpacing","char","charOff","charSet","checked","clear","colSpan","color","cols","compact","coords","dateTime","dir","encType","frame","hSpace","headers","height","hrefLang","htmlFor","id","isMap","itemProp","label","lang","maxLength","media","method","multiple","name","noHref","noShade","noWrap","open","prompt","readOnly","rev","rowSpan","rows","rules","scope","selected","shape","size","span","start","summary","tabIndex","title","useMap","vAlign","value","width"]},clobber:["ariaDescribedBy","ariaLabelledBy","id","name"],clobberPrefix:"user-content-",protocols:{cite:["http","https"],href:["http","https","irc","ircs","mailto","xmpp"],longDesc:["http","https"],src:["http","https"]},required:{input:{disabled:!0,type:"checkbox"}},strip:["script"],tagNames:["a","b","blockquote","br","code","dd","del","details","div","dl","dt","em","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","li","ol","p","picture","pre","q","rp","rt","ruby","s","samp","section","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","tr","tt","ul","var"]},s={}.hasOwnProperty;function o(t,e){if(e&&"object"==typeof e){const a=e;switch("string"==typeof a.type?a.type:""){case"comment":return function(t,e){if(t.schema.allowComments){const t="string"==typeof e.value?e.value:"",a=t.indexOf("--\x3e"),r={type:"comment",value:a<0?t:t.slice(0,a)};return l(r,e),r}}(t,a);case"doctype":return function(t,e){if(t.schema.allowDoctypes){const t={type:"doctype"};return l(t,e),t}}(t,a);case"element":return function(t,e){const a="string"==typeof e.tagName?e.tagName:"";t.stack.push(a);const r=n(t,e.children),o=function(t,e){const a=t.stack[t.stack.length-1],r=t.schema.attributes,o=t.schema.required,n=r&&s.call(r,a)?r[a]:void 0,i=r&&s.call(r,"*")?r["*"]:void 0,l=e&&"object"==typeof e?e:{},u={};let f;for(f in l)if(s.call(l,f)){const e=l[f];let a=c(t,p(n,f),f,e);null==a&&(a=c(t,p(i,f),f,e)),null!=a&&(u[f]=a)}if(o&&s.call(o,a)){const t=o[a];for(f in t)s.call(t,f)&&!s.call(u,f)&&(u[f]=t[f])}return u}(t,e.properties);t.stack.pop();let i=!1;if(a&&"*"!==a&&(!t.schema.tagNames||t.schema.tagNames.includes(a))&&(i=!0,t.schema.ancestors&&s.call(t.schema.ancestors,a))){const e=t.schema.ancestors[a];let r=-1;for(i=!1;++r<e.length;)t.stack.includes(e[r])&&(i=!0)}if(!i)return t.schema.strip&&!t.schema.strip.includes(a)?r:void 0;const u={type:"element",tagName:a,properties:o,children:r};return l(u,e),u}(t,a);case"root":return function(t,e){const a=n(t,e.children),r={type:"root",children:a};return l(r,e),r}(t,a);case"text":return function(t,e){const a="string"==typeof e.value?e.value:"",r={type:"text",value:a};return l(r,e),r}(0,a)}}}function n(t,e){const a=[];if(Array.isArray(e)){const r=e;let s=-1;for(;++s<r.length;){const e=o(t,r[s]);e&&(Array.isArray(e)?a.push(...e):a.push(e))}}return a}function c(t,e,a,r){return e?Array.isArray(r)?function(t,e,a,r){let s=-1;const o=[];for(;++s<r.length;){const n=i(t,e,a,r[s]);"number"!=typeof n&&"string"!=typeof n||o.push(n)}return o}(t,e,a,r):i(t,e,a,r):void 0}function i(t,e,a,r){if(("boolean"==typeof r||"number"==typeof r||"string"==typeof r)&&function(t,e,a){const r=t.schema.protocols&&s.call(t.schema.protocols,e)?t.schema.protocols[e]:void 0;if(!r||0===r.length)return!0;const o=String(a),n=o.indexOf(":"),c=o.indexOf("?"),i=o.indexOf("#"),l=o.indexOf("/");if(n<0||l>-1&&n>l||c>-1&&n>c||i>-1&&n>i)return!0;let p=-1;for(;++p<r.length;){const t=r[p];if(n===t.length&&o.slice(0,t.length)===t)return!0}return!1}(t,a,r)){if("object"==typeof e&&e.length>1){let t=!1,a=0;for(;++a<e.length;){const s=e[a];if(s&&"object"==typeof s&&"flags"in s){if(s.test(String(r))){t=!0;break}}else if(s===r){t=!0;break}}if(!t)return}return t.schema.clobber&&t.schema.clobberPrefix&&t.schema.clobber.includes(a)?t.schema.clobberPrefix+r:r}}function l(a,r){const s=e(r);r.data&&(a.data=t(r.data)),s&&(a.position=s)}function p(t,e){let a,r=-1;if(t)for(;++r<t.length;){const s=t[r],o="string"==typeof s?s:s[0];if(o===e)return s;"data*"===o&&(a=s)}if(e.length>4&&"data"===e.slice(0,4).toLowerCase())return a}function u(t){return function(e){const a=function(t,e){let a={type:"root",children:[]};const s=o({schema:e?{...r,...e}:r,stack:[]},t);return s&&(Array.isArray(s)?1===s.length?a=s[0]:a.children=s:a=s),a}(e,t);return a}}export{u as default,r as defaultSchema};
